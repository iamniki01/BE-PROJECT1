//--------------------------------------------------------------------------------------------------------------------
// ADC30.c
//--------------------------------------------------------------------------------------------------------------------

//<<<<<<< iamniki01-Receiver_side
// AUTH:	NIKHIL GOWDA S
//=======
//>>>>>>> master
// DATE:	09/09/2013

// MODIFIED BY:
// MODIFIED DATE:

// Program to 

// Target: PROJECT BOARD of RENESAS G13 R5F100LEA (PES-49-1212)

// Tool chain: CubeSuite+

//--------------------------------------------------------------------------------------------------------------------
// Includes
//--------------------------------------------------------------------------------------------------------------------


//--------------------------------------------------------------------------------------------------------------------
// Global VARIABLES
//--------------------------------------------------------------------------------------------------------------------

unsigned int buffer, ADC_Volt, ADC_Data, Volt_Temp;
unsigned char Volt_Value[5]="000";
//unsigned char Volt_Value1[6]="000";

unsigned int ADC_Data_Arr[50];

//--------------------------------------------------------------------------------------------------------------------
// Global CONSTANTS
//--------------------------------------------------------------------------------------------------------------------


//--------------------------------------------------------------------------------------------------------------------
// Function PROTOTYPES
//--------------------------------------------------------------------------------------------------------------------

void ADC64_Start( unsigned char Chan );

//--------------------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------------------

void ADC64_Start( unsigned char Chan )
{
	unsigned char i;
	
	ADS = Chan;		// channel selection
	ADC_Data = 0;
	for( i=0; i<50; i++ )
	{
		R_ADC_Start( );
		MSDelay(10);
		R_ADC_Get_Result( &buffer );
		R_ADC_Stop( );

		ADC_Data_Arr[i] = buffer;
		ADC_Data = ADC_Data + ADC_Data_Arr[i];
	}
	ADC_Data = ADC_Data / 50;
	ADC_Volt =(( ADC_Data * 5.0 ) / 1023.0 ) * 100;		
	Volt_Temp = ADC_Volt;


	//Volt_Value[4] = (char)(ADC_Volt%10)+48;
	//ADC_Volt = ADC_Volt / 10;
	Volt_Value[2]  = (char)(ADC_Volt%10)+48;
	ADC_Volt = ADC_Volt / 10;
	Volt_Value[1]  = (char)(ADC_Volt%10)+48;
	ADC_Volt = ADC_Volt / 10;
	Volt_Value[0]  = (char)(ADC_Volt%10)+48;

/*
	Volt_Value1[2] = (char)(ADC_Volt%10)+48;
	ADC_Volt = ADC_Volt / 10;
	Volt_Value1[1]  = (char)(ADC_Volt%10)+48;
	ADC_Volt = ADC_Volt / 10;
	Volt_Value1[0]  = (char)(ADC_Volt%10)+48;
	Volt_Value1[3] = '\0';
//	ADC_Volt = ADC_Volt / 10;
//	Volt_Value[0]  = (char)(ADC_Volt%10)+48;
*/
}


